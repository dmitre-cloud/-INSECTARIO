{% extends 'base.html' %}
{% block title %}Lista de Humedades{% endblock %}
{% block content %}
    <h1 class="mb-4">Lista de Humedades</h1>
    <a href="{% url 'humedad_create' %}" class="btn btn-primary mb-3">Crear Nueva Humedad</a>

    {% if humedades %}
        <div class="table-responsive">
            <table id="humedadTable" class="table table-striped table-hover"> {# Añade un ID #}
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Humedad</th>
                        <th>Máx Humedad</th>
                        <th>Mín Humedad</th>
                        <th>Hora</th>
                        <th>Área de Trabajo</th>
                        <th>Fecha creación</th>
                        <th>Fecha actualización</th>
                        <th>Observaciones</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for hum in humedades %}
                        <tr>
                            <td>{{ hum.id }}</td>
                            <td>{{ hum.humedad }}</td>
                            <td>{{ hum.max_humedad }}</td>
                            <td>{{ hum.min_humedad }}</td>
                            <td>{{ hum.hora|time:"H:i" }}</td> {# Formato de hora #}
                            <td>{{ hum.area_de_trabajo }}</td>
                            
                            {# CAMBIO AQUÍ: Formato "dd/mm/YYYY a las H:i" #}
                            <td>{{ hum.fecha_creacion|date:"d/m/Y \a \l\a\s H:i" }}</td>
                            
                            {# CAMBIO AQUÍ: Formato "dd/mm/YYYY a las H:i" #}
                            <td>{{ hum.fecha_actualizacion|date:"d/m/Y \a \l\a\s H:i" }}</td>
                            
                            <td>{{ hum.obs|default:"N/A" }}</td>
                            <td>
                                <a href="{% url 'humedad_update' hum.pk %}" class="btn btn-warning btn-sm me-1"><i class="bi bi-pen"></i></a>
                                <a href="{% url 'humedad_delete' hum.pk %}" class="btn btn-danger btn-sm"><i class="bi bi-trash"></i></a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No hay registros de humedad.</p>
    {% endif %}
{% endblock %}

{% block extra_js %}

<script>
    $(document).ready(function () {
    var table = $("#humedadTable").DataTable({
      pageLength: 5,
      lengthMenu: [
        [5, -1],
        [5, "Todos"],
      ],

      lengthChange: true,

      language: idioma_espanol,
    });

    table.buttons().container().appendTo("#example_wrapper .col-md-6:eq(0)");
  });
  var idioma_espanol = {
    sProcessing: "Procesando...",
    sLengthMenu: "Mostrar _MENU_ registros",
    sZeroRecords: "No se encontraron resultados",
    sEmptyTable: "Ningún dato disponible en esta tabla",
    sInfo:
      "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    sInfoEmpty: "Mostrando registros del 0 al 0 de un total de 0 registros",
    sInfoFiltered: "(filtrado de un total de _MAX_ registros)",
    sInfoPostFix: "",
    sSearch: "Buscar:",
    sUrl: "",
    sInfoThousands: ",",
    sLoadingRecords: "Cargando...",
    oPaginate: {
      sFirst: "Primero",
      sLast: "Último",
      sNext: "Siguiente",
      sPrevious: "Anterior",
    },
    oAria: {
      sSortAscending: ": Activar para ordenar la columna de manera ascendente",
      sSortDescending:
        ": Activar para ordenar la columna de manera descendente",
    },
    buttons: {
      copy: "Copiar",
      print: "Imprimir",
      colvis: "Visibilidad",
    },
  };
</script>
{% endblock %}