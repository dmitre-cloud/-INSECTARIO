{% extends 'base.html' %}
{% block title %}Lista de Temperaturas{% endblock %}
{% block content %}
    <h1 class="mb-4">Lista de Temperaturas</h1>
    <a href="{% url 'temperatura_create' %}" class="btn btn-primary mb-3">Crear Nueva Temperatura</a>
    {% if temperaturas %}
        <div class="table-responsive">
            {# Añade un ID a la tabla para que DataTables pueda inicializarla #}
            <table id="temperaturaTable" class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Temperatura</th>
                        <th>Máx Temp</th>
                        <th>Mín Temp</th>
                        <th>Hora</th>
                        <th>Área de Trabajo</th>
                        <th>Fecha creación</th>
                        <th>Fecha actualización</th>
                        <th>Observaciones</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for temp in temperaturas %}
                        <tr>
                            <td>{{ temp.id }}</td>
                            <td>{{ temp.temperatura }}</td>
                            <td>{{ temp.max_temperatura }}</td>
                            <td>{{ temp.min_temperatura }}</td>
                            <td>{{ temp.hora|time:"H:i" }}</td> {# Formato de hora #}
                            <td>{{ temp.area_de_trabajo }}</td>
                            {# CAMBIO AQUÍ: Formato "dd/mm/YYYY a las H:i" #}
                            <td>{{ temp.fecha_creacion|date:"d/m/Y \a \l\a\s H:i" }}</td>
                            {# CAMBIO AQUÍ: Formato "dd/mm/YYYY a las H:i" #}
                            <td>{{ temp.fecha_actualizacion|date:"d/m/Y \a \l\a\s H:i" }}</td>
                            <td>{{ temp.obs|default:"N/A" }}</td>
                            <td>
                                <a href="{% url 'temperatura_update' temp.pk %}" class="btn btn-warning btn-sm me-1"><i class="bi bi-pen"></i></a>
                                <a href="{% url 'temperatura_delete' temp.pk %}" class="btn btn-danger btn-sm"><i class="bi bi-trash"></i></a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No hay registros de temperatura.</p>
    {% endif %}
{% endblock %}
{% block extra_js %}
<script>
    $(document).ready(function () {
    var table = $("#temperaturaTable").DataTable({
      pageLength: 5,
      lengthMenu: [
        [5, -1],
        [5, "Todos"],
      ],

      lengthChange: true,

      language: idioma_espanol,
    });

    table.buttons().container().appendTo("#example_wrapper .col-md-6:eq(0)");
  });
  var idioma_espanol = {
    sProcessing: "Procesando...",
    sLengthMenu: "Mostrar _MENU_ registros",
    sZeroRecords: "No se encontraron resultados",
    sEmptyTable: "Ningún dato disponible en esta tabla",
    sInfo:
      "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
    sInfoEmpty: "Mostrando registros del 0 al 0 de un total de 0 registros",
    sInfoFiltered: "(filtrado de un total de _MAX_ registros)",
    sInfoPostFix: "",
    sSearch: "Buscar:",
    sUrl: "",
    sInfoThousands: ",",
    sLoadingRecords: "Cargando...",
    oPaginate: {
      sFirst: "Primero",
      sLast: "Último",
      sNext: "Siguiente",
      sPrevious: "Anterior",
    },
    oAria: {
      sSortAscending: ": Activar para ordenar la columna de manera ascendente",
      sSortDescending:
        ": Activar para ordenar la columna de manera descendente",
    },
    buttons: {
      copy: "Copiar",
      print: "Imprimir",
      colvis: "Visibilidad",
    },
  };
</script>
{% endblock %}